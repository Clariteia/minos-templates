service:
  name: {{ cookiecutter.name }}
  aggregate: src.aggregates.{{ cookiecutter.aggregate }}
  injections:
    postgresql_pool: minos.common.PostgreSqlPool
    command_broker: minos.networks.CommandBroker
    command_reply_broker: minos.networks.CommandReplyBroker
    event_broker: minos.networks.EventBroker
    consumer: minos.networks.Consumer
    dynamic_handler_pool: minos.networks.DynamicHandlerPool
    repository: minos.common.PostgreSqlRepository
    saga_manager: minos.saga.SagaManager
    snapshot: minos.common.PostgreSqlSnapshot
    discovery: minos.networks.DiscoveryConnector
  services:
    - minos.networks.ConsumerService
    - minos.networks.CommandHandlerService
    - minos.networks.CommandReplyHandlerService
    - minos.networks.EventHandlerService
    - minos.networks.RestService
    - minos.networks.SnapshotService
    - minos.networks.ProducerService
    - minos.networks.PeriodicTaskSchedulerService
rest:
  host: {{ cookiecutter.rest_host }}
  port: {{ cookiecutter.rest_port }}
broker:
  host: {{ cookiecutter.broker_host }}
  port: {{ cookiecutter.broker_port }}
  queue:
    database: {{ cookiecutter.name }}_db
    user: {{ cookiecutter.database_user }}
    password: {{ cookiecutter.database_password }}
    host: {{ cookiecutter.database_host }}
    port: {{ cookiecutter.database_port }}
    records: 1000
    retry: 2
repository:
  database: {{ cookiecutter.name }}_db
  user: {{ cookiecutter.database_user }}
  password: {{ cookiecutter.database_password }}
  host: {{ cookiecutter.database_host }}
  port: {{ cookiecutter.database_port }}
snapshot:
  database: {{ cookiecutter.name }}_db
  user: {{ cookiecutter.database_user }}
  password: {{ cookiecutter.database_password }}
  host: {{ cookiecutter.database_host }}
  port: {{ cookiecutter.database_port }}
events:
  service: src.queries.{{ cookiecutter.aggregate }}QueryService
queries:
  service: src.queries.{{ cookiecutter.aggregate }}QueryService
commands:
  service: src.commands.{{ cookiecutter.aggregate }}CommandService
saga:
  storage:
    path: ./{{ cookiecutter.name }}.lmdb
discovery:
  client: minos.networks.MinosDiscoveryClient
  host: localhost
  port: 5567
