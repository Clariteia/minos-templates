build: build-pod sleep create-user

build-pod:
	kubectl create -f ./configmap.yaml
	kubectl create -f ./service.yaml
	kubectl create -f ./deployment.yaml

sleep:
	sleep 5

create-user:
	kubectl exec -it --namespace={{ project_name }} svc/postgres -- bash -c "psql -U postgres -tc \"CREATE USER minos WITH ENCRYPTED PASSWORD 'min0s';\""

create-database:
	kubectl exec -it --namespace={{ project_name }} svc/postgres -- bash -c "psql -U postgres -tc \"CREATE DATABASE $(DB_NAME) OWNER minos;\""
